/**
 * These are utility functions for the 12 choose 4 choose table.
 */

function ensureLength(anArr) {
    while (anArr.length < 12) {
        anArr.push(false);
    }
    return anArr;
}

exports.encodeChoose = function(array) {
    var value = 0;
    for (var i = 0; i < array.length; i++) {
        value |= array[i] << i;
    }
    return value;
}

exports.generateTable = function() {
    var flagArray = exports.generateChooseFlags();
    var array = new Array(flagArray.length);
    for (var i = 0; i < flagArray.length; i++) {
        var theValue = exports.encodeChoose(flagArray[i]);
        array[theValue] = i;
    }
    return array;
}

exports.generateChooseFlags = function(prefix) {
    if (!prefix) return exports.generateChooseFlags([]);
    var trueCount = 0;
    for (var i = 0; i < prefix.length; i++) {
        trueCount += prefix[i] ? 1 : 0;
    }
    if (trueCount == 4) {
        return [ensureLength(prefix)];
    }
    if (prefix.length > 12 - 4 + trueCount) return [];
    var list = exports.generateChooseFlags(prefix.concat([1]));
    return list.concat(exports.generateChooseFlags(prefix.concat([0])));
}
