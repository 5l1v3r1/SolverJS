/**
 * These are utility functions for the 12 choose 4 choose table.
 */

function ensureLength(anArr) {
    while (anArr.length < 12) {
        anArr.push(false);
    }
    return anArr;
}

exports.encodeChoose = function(array) {
    var value = 0;
    for (var i = 0; i < array.length; i++) {
        value |= (array[i] ? 1 : 0) << i;
    }
    return value;
}

exports.generateTable = function() {
    var flagArray = exports.generateChooseFlags();
    return flagArray.map(function (x) {
        return exports.encodeChoose(x);
    });
}

exports.generateChooseFlags = function(prefix) {
    if (!prefix) return exports.generateChooseFlags([]);
    var trueCount = 0;
    for (var i = 0; i < prefix.length; i++) {
        trueCount += prefix[i] ? 1 : 0;
    }
    if (trueCount == 4) {
        return [ensureLength(prefix)];
    }
    if (prefix.length > 12 - 4 + trueCount) return [];
    var list = exports.generateChooseFlags(prefix.concat([true]));
    return list.concat(exports.generateChooseFlags(prefix.concat([false])));
}
